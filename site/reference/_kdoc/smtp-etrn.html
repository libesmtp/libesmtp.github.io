

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Remote Message Queue Starting (ETRN) &mdash; libESMTP 1.1.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Errors" href="errors.html" />
    <link rel="prev" title="Message Headers" href="headers.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> libESMTP
          

          
            
            <img src="../../_static/pillarbox.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../libesmtp.html">Benefits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changes-since-v1.0.6.html">Changes since v1.0.6</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../programflow.html">API Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../certificates.html">TLS Certificates</a></li>
<li class="toctree-l2"><a class="reference internal" href="libesmtp.html">libESMTP Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="smtp-api.html">Core API</a></li>
<li class="toctree-l2"><a class="reference internal" href="smtp-api.html#delivery-status-notification-dsn">Delivery Status Notification (DSN)</a></li>
<li class="toctree-l2"><a class="reference internal" href="smtp-api.html#size-extention">Size Extention</a></li>
<li class="toctree-l2"><a class="reference internal" href="smtp-api.html#bit-mime-transport-extension">8bit-MIME Transport Extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="smtp-api.html#deliver-by-extension">Deliver By Extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="smtp-api.html#id1">Callbacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="smtp-api.html#smtp-protocol">SMTP Protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="smtp-api.html#tear-down-session">Tear Down Session</a></li>
<li class="toctree-l2"><a class="reference internal" href="smtp-api.html#application-data">Application Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="smtp-api.html#miscellaneous-apis">Miscellaneous APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="smtp-tls.html">StartTLS Extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="smtp-auth.html">Auth Extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="auth-client.html">Auth Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="message-callbacks.html">Message Callbacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="headers.html">Message Headers</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Remote Message Queue Starting (ETRN)</a></li>
<li class="toctree-l2"><a class="reference internal" href="errors.html">Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../events.html">Event Callback</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tlsevents.html">TLS Event Callback</a></li>
<li class="toctree-l2"><a class="reference internal" href="../licence.html">Licence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../genindex.html">Index of Symbols</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../bugreport.html">Reporting Bugs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users.html">Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../essays.html">Essays</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../authors.html">Author</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../oldfiles.html">Legacy Files</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/libesmtp/libESMTP/wiki">Wiki</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">libESMTP</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">API Reference</a> &raquo;</li>
        
      <li>Remote Message Queue Starting (ETRN)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p id="rfc-1985"><strong>RFC 1985</strong></p>
<div class="section" id="remote-message-queue-starting-etrn">
<h1>Remote Message Queue Starting (ETRN)<a class="headerlink" href="#remote-message-queue-starting-etrn" title="Permalink to this headline">¶</a></h1>
<p>The SMTP ETRN extension is used to request a remote MTA to start its
delivery queue for the specified domain.  If the application requests
the use if the ETRN extension and the remote MTA does not list ETRN,
libESMTP will use the event callback to notify the application.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.smtp_etrn_add_node">
<span class="n"><span class="pre">smtp_etrn_node_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">smtp_etrn_add_node</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">smtp_session_t</span></span><span class="w"> </span><span class="n"><span class="pre">session</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">option</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">domain</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.smtp_etrn_add_node" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>create an ETRN node.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">smtp_session_t</span> <span class="pre">session</span></code></dt><dd><p>The session.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">option</span></code></dt><dd><p>The option character.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*domain</span></code></dt><dd><p>Request mail for this domain.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Add an ETRN node to the SMTP session.</p>
<p><strong>Return</strong></p>
<p>An <code class="xref c c-type docutils literal notranslate"><span class="pre">typedef</span> <span class="pre">smtp_etrn_node_t</span></code> or <code class="docutils literal notranslate"><span class="pre">NULL</span></code> on failure.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.smtp_etrn_enumerate_nodes">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">smtp_etrn_enumerate_nodes</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">smtp_session_t</span></span><span class="w"> </span><span class="n"><span class="pre">session</span></span>, <span class="n"><span class="pre">smtp_etrn_enumerate_nodecb_t</span></span><span class="w"> </span><span class="n"><span class="pre">cb</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">arg</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.smtp_etrn_enumerate_nodes" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Call function for each ETRN node in session.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">smtp_session_t</span> <span class="pre">session</span></code></dt><dd><p>The session.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">smtp_etrn_enumerate_nodecb_t</span> <span class="pre">cb</span></code></dt><dd><p>Callback function</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*arg</span></code></dt><dd><p>Argument (closure) passed to callback.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Call the callback function once for each ETRN node in the SMTP session.</p>
<p><strong>Return</strong></p>
<p>Zero on failure, non-zero on success.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.smtp_etrn_node_status">
<span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">smtp_status_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">smtp_etrn_node_status</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">smtp_etrn_node_t</span></span><span class="w"> </span><span class="n"><span class="pre">node</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.smtp_etrn_node_status" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Retrieve ETRN status.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">smtp_etrn_node_t</span> <span class="pre">node</span></code></dt><dd><p>An <code class="xref c c-type docutils literal notranslate"><span class="pre">smtp_etrn_node_t</span></code> returned by smtp_etrn_add_node()</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Retrieve the ETRN node success/failure status from a previous SMTP session.
This includes SMTP status codes, RFC 2034 enhanced status codes, if
available and text from the server describing the status.</p>
<p><strong>Return</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">NULL</span></code> if no status information is available,
otherwise a pointer to the status information.  The pointer remains valid
until the next call to libESMTP in the same thread.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.smtp_etrn_set_application_data">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">smtp_etrn_set_application_data</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">smtp_etrn_node_t</span></span><span class="w"> </span><span class="n"><span class="pre">node</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.smtp_etrn_set_application_data" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Associate data with an ETRN node.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">smtp_etrn_node_t</span> <span class="pre">node</span></code></dt><dd><p>An <code class="xref c c-type docutils literal notranslate"><span class="pre">smtp_etrn_node_t</span></code> returned by smtp_etrn_add_node()</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*data</span></code></dt><dd><p>Application data to set</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Associate application defined data with the opaque ETRN structure.</p>
<p>Only available when <code class="docutils literal notranslate"><span class="pre">LIBESMTP_ENABLE_DEPRECATED_SYMBOLS</span></code> is defined.
Use smtp_etrn_set_application_data_release() instead.</p>
<p><strong>Return</strong></p>
<p>Previously set application data or <code class="docutils literal notranslate"><span class="pre">NULL</span></code>.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.smtp_etrn_set_application_data_release">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">smtp_etrn_set_application_data_release</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">smtp_etrn_node_t</span></span><span class="w"> </span><span class="n"><span class="pre">node</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">release</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="kt"><span class="pre">void</span></span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">)</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.smtp_etrn_set_application_data_release" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Associate data with an ETRN node.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">smtp_etrn_node_t</span> <span class="pre">node</span></code></dt><dd><p>An <code class="xref c c-type docutils literal notranslate"><span class="pre">smtp_etrn_node_t</span></code> returned by smtp_etrn_add_node()</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*data</span></code></dt><dd><p>Application data</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">(*release)</span> <span class="pre">(void</span> <span class="pre">*)</span></code></dt><dd><p>function to free/unref data.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Associate application data with the ETRN node.
If <strong>release</strong> is non-NULL it is called to free or unreference data when
changed or the session is destroyed.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.smtp_etrn_get_application_data">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">smtp_etrn_get_application_data</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">smtp_etrn_node_t</span></span><span class="w"> </span><span class="n"><span class="pre">node</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.smtp_etrn_get_application_data" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get data from an ETRN node.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">smtp_etrn_node_t</span> <span class="pre">node</span></code></dt><dd><p>An <code class="xref c c-type docutils literal notranslate"><span class="pre">smtp_etrn_node_t</span></code> returned by smtp_etrn_add_node()</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Retrieve application data from the opaque ETRN structure.</p>
<p><strong>Return</strong></p>
<p>Application data or <code class="docutils literal notranslate"><span class="pre">NULL</span></code>.</p>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="errors.html" class="btn btn-neutral float-right" title="Errors" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="headers.html" class="btn btn-neutral float-left" title="Message Headers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Brian Stafford.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>